<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>knerz</title>
    <style>
        #canvas-resizer {
            border: black 2px dashed;
            overflow: hidden;
            height: 33em;
            width: 33em;
        }
    </style>
</head>
<body>
    <center>
        <h2>Raytracing with WASM - Test5</h2>

        <div id="canvas-resizer" class="resizable">
            <canvas id="screen"></canvas>
        </div>

        <br>
        <br>

        <label id="time-measurement"></label>

        <br>

        <label>Choose a scene:</label>
        <select id="select_scenes">
            <option value="cornell_box.json">Cornell box</option>
            <option value="scene_rust.json">Santa and balls</option>
        </select>
        <br>
        <label id="thread-count"></label>

<!-- Credits        
        <br>
        <br>

        <h4>Resources</h4>
        <ul>
            <li>
                <a href="https://www.hellorust.com/demos/canvas/index.html">Geoffroy Couprie - Update a canvas from wasm</a>
            </li>
            <li>
                <a href="https://depth-first.com/articles/2020/06/29/compiling-rust-to-webassembly-a-simple-example/">Compiling Rust to WebAssembly: A Simple Example</a>
            </li>
            <li>
                <a href="https://rustwasm.github.io/docs/wasm-bindgen/examples/without-a-bundler.html">The `wasm-bindgen` Guide: Without a Bundler</a>
            </li>
            <li>
                <a href="https://github.com/gzuidhof/coi-serviceworker">
                    Cross-origin isolation (COOP and COEP) through a service worker for situations in which you can't control the headers (e.g. GH pages). (Guido Zuidhof)
                </a>
            </li>
        </ul>
-->
    </center>
</body>
<!--source: https://gist.github.com/developit/220246bc99044af74a6680ce13284f59
    author: Jason Miller
    adds support for module workers in "all modern browsers"-->
<script src="module-workers-polyfill.js"></script>
<!-- source: https://github.com/gzuidhof/coi-serviceworker
    author: Guido Zuidhof
    enable COOP and COEP headers to enable SharedArrayBuffer-->
<script src="coi-serviceworker.js"></script>
<!--Manual imports to share code with WebWorkers without modules or a bundler-->
<!--TODO: Can we import with importScripts in Typescript? -->
<!-- <script src="pkg/messages/message_from_worker.js"></script>
<script src="pkg/messages/message_to_worker.js"></script> -->
<!-- <script src="pkg/web_app.js"></script> -->
<script type="module" src="pkg/main/main.js"></script>
<script>
    const el = document.createElement("div")
    el.innerHTML = `Cross origin isolated: ${window.crossOriginIsolated ? "✅" : "❌"}`
    document.body.append(el);
</script>
</html>